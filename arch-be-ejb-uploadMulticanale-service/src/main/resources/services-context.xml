<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:jee="http://www.springframework.org/schema/jee"
	xmlns:context="http://www.springframework.org/schema/context"	
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
	http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
	http://www.springframework.org/schema/jee
    http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
	http://www.springframework.org/schema/context
	http://www.springframework.org/schema/context/spring-context-3.1.xsd">
	
	<context:component-scan base-package="it.bmed.arch.uploadMulticanale.be.service.cmis"/>
<!--  	<context:component-scan base-package="it.bmed.asia"/> -->
 	
 	<bean id="ecmService" class="it.bmed.arch.uploadMulticanale.be.service.cmis.ECMServiceImpl">
 		<property name="alfrescoConnector" ref="alfrescoConnector"/>
 		<property name="filenetConnector" ref="filenetConnector"/>
 	</bean>
 	
 	<bean id="nasService" class="it.bmed.arch.uploadMulticanale.be.service.nas.NASServiceImpl">
 		<property name="settingsBean" ref="settingsBean"/>
 	</bean>

	<bean id="azureService" class="it.bmed.arch.uploadMulticanale.be.service.azure.AzureServiceImpl"/>
	
	<bean id="generatePDFServiceClient" class="it.bmed.arch.uploadMulticanale.be.service.livecycle.GeneratePDFServiceClientImpl" /> 	
 	
	<!-- ALFRESCO ECM CONNECTOR -->
	<bean id="alfrescoConnector"
		class="it.bmed.arch.uploadMulticanale.be.service.cmis.AlfrescoConnector">
		<!-- User credentials -->
		<property name="user" ref="alfrescoUser" />
		<property name="password" ref="alfrescoPassword" />
		<!-- Binding Settings -->
		<property name="bindingSPIType" value="org.apache.chemistry.opencmis.client.bindings.spi.webservices.CmisWebServicesSpi" />
		<!-- CMIS WebService Connection Settings -->
		<property name="repositoryServiceUrl" ref="alfrescoUrl" />
		<property name="navigationServiceWsdlUrl" ref="alfrescoUrl"/>
		<property name="objectServiceWsdlUrl" ref="alfrescoUrl" />
		<property name="versioningServiceWsdlUrl" ref="alfrescoUrl"/>
		<property name="discoveryServiceWsdlUrl" ref="alfrescoUrl"/>
		<property name="relationshipServiceWsdlUrl" ref="alfrescoUrl"/>
		<property name="multiFilingServiceWsdlUrl" ref="alfrescoUrl"/>
		<property name="policyServiceWsdlUrl" ref="alfrescoUrl"/>
		<property name="aclServiceWsdlUrl" ref="alfrescoUrl"/>
	</bean>

	<!-- FILENET ECM CONNECTOR -->
	<bean id="filenetConnector"
		class="it.bmed.arch.uploadMulticanale.be.service.cmis.FilenetConnector">
		<!-- User credentials -->
		<property name="user" value="" />
		<property name="password" value="" />

		<!-- CMIS WebService Connection Settings -->
		<property name="repositoryServiceUrl" value="" />
		<property name="navigationServiceWsdlUrl" value="" />
		<property name="objectServiceWsdlUrl" value="" />
		<property name="versioningServiceWsdlUrl" value="" />
		<property name="discoveryServiceWsdlUrl" value="" />
		<property name="relationshipServiceWsdlUrl" value="" />
		<property name="multiFilingServiceWsdlUrl" value="" />
		<property name="policyServiceWsdlUrl" value="" />
		<property name="aclServiceWsdlUrl" value="" />
	</bean>
	
	<bean id="settingsBean" class="it.bmed.arch.uploadMulticanale.be.service.nas.NASServiceSettingsBean">
		<property name="nasInternetBankingPath" ref="nasIBPath"/>
		<property name="nasReteDiVenditaPath" ref="nasRVPath"/>
		<property name="nasPortaleDiSedePath" ref="nasPSPath"/>
		<property name="nasInternetBankingDeletedPath" ref="nasIBDeletedPath"/>
		<property name="nasReteDiVenditaDeletedPath" ref="nasRVDeletedPath"/>
		<property name="nasPortaleDiSedeDeletedPath" ref="nasPSDeletedPath"/>
	</bean>
	
	<bean id="mimeTypeMapping" class="org.springframework.beans.factory.config.MapFactoryBean">
		<property name="targetMapClass">
			<value>java.util.LinkedHashMap</value>
		</property>
		<property name="sourceMap">
			<map>
				<entry key="pdf" value="application/pdf" />
				<entry key="png" value="image/png" />
				<entry key="jpeg" value="image/jpeg" />
				<entry key="jpg" value="image/jpeg" />
				<entry key="gif" value="image/gif" />
				<entry key="bmp" value="image/bmp" />
				<entry key="tif" value="image/tiff" />
				<entry key="tiff" value="image/tiff" />
			</map>
		</property>
	</bean>
	
	<jee:jndi-lookup id="alfrescoUrl" jndi-name="java:comp/env/ALFRESCO-URL" expected-type="java.lang.String" />
	<jee:jndi-lookup id="alfrescoUser" jndi-name="java:comp/env/ALFRESCO-USER" expected-type="java.lang.String" />
	<jee:jndi-lookup id="alfrescoPassword" jndi-name="java:comp/env/ALFRESCO-PW" expected-type="java.lang.String" />
	<jee:jndi-lookup id="nasIBPath" jndi-name="java:comp/env/PATH-NAS-IB" expected-type="java.lang.String" />
	<jee:jndi-lookup id="nasPSPath" jndi-name="java:comp/env/PATH-NAS-PS" expected-type="java.lang.String" />
	<jee:jndi-lookup id="nasRVPath" jndi-name="java:comp/env/PATH-NAS-RV" expected-type="java.lang.String" />
	<jee:jndi-lookup id="nasIBDeletedPath" jndi-name="java:comp/env/DELETED-PATH-NAS-IB" expected-type="java.lang.String" />
	<jee:jndi-lookup id="nasPSDeletedPath" jndi-name="java:comp/env/DELETED-PATH-NAS-PS" expected-type="java.lang.String" />
	<jee:jndi-lookup id="nasRVDeletedPath" jndi-name="java:comp/env/DELETED-PATH-NAS-RV" expected-type="java.lang.String" />
	<jee:jndi-lookup id="filenetUrl" jndi-name="java:comp/env/FILENET-URL" expected-type="java.lang.String" />
	<jee:jndi-lookup id="filenetUser" jndi-name="java:comp/env/FILENET-USER" expected-type="java.lang.String" />
	<jee:jndi-lookup id="filenetPassword" jndi-name="java:comp/env/FILENET-PW" expected-type="java.lang.String" />
	
</beans>
